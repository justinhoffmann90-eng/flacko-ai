(()=>{var e={};e.id=6724,e.ids=[6724],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9239:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),s(6660),s(3456),s(5866),s(4752);var a=s(3191),r=s(8716),i=s(7922),n=s.n(i),l=s(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["(dashboard)",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,6660)),"/Users/justinhoffmann/Desktop/Flacko_AI/flacko-ai/app/(dashboard)/settings/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,3456)),"/Users/justinhoffmann/Desktop/Flacko_AI/flacko-ai/app/(dashboard)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,4752)),"/Users/justinhoffmann/Desktop/Flacko_AI/flacko-ai/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/justinhoffmann/Desktop/Flacko_AI/flacko-ai/app/(dashboard)/settings/page.tsx"],u="/(dashboard)/settings/page",x={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(dashboard)/settings/page",pathname:"/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},2032:(e,t,s)=>{Promise.resolve().then(s.bind(s,6118))},6118:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>w});var a=s(326),r=s(7577),i=s(5047),n=s(2945),l=s(2485),o=s(772),d=s(4432),c=s(1048),u=s(7863),x=s(2881);let p=(0,x.Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),m=r.forwardRef(({className:e,error:t,children:s,...r},i)=>(0,a.jsxs)("div",{className:"relative w-full",children:[a.jsx("select",{className:(0,u.cn)("flex h-10 w-full appearance-none rounded-md border border-input bg-background px-3 py-2 pr-8 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t&&"border-red-500 focus-visible:ring-red-500",e),ref:i,...r,children:s}),a.jsx(p,{className:"absolute right-2 top-1/2 h-4 w-4 -translate-y-1/2 opacity-50 pointer-events-none"}),t&&a.jsx("p",{className:"mt-1 text-sm text-red-500",children:t})]}));m.displayName="Select";let h=r.forwardRef(({className:e,checked:t=!1,onCheckedChange:s,disabled:r,...i},n)=>a.jsx("button",{type:"button",role:"switch","aria-checked":t,"data-state":t?"checked":"unchecked",disabled:r,className:(0,u.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",t?"bg-primary":"bg-input",e),onClick:()=>s?.(!t),ref:n,...i,children:a.jsx("span",{className:(0,u.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform",t?"translate-x-5":"translate-x-0")})}));h.displayName="Switch";var g=s(2643),f=s(2318),j=s(361),v=s(9015);let b=(0,x.Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),y=(0,x.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);function w(){let[e,t]=(0,r.useState)(!0),[s,u]=(0,r.useState)(!1),[x,p]=(0,r.useState)(!1),[w,N]=(0,r.useState)(null),k=(0,i.useRouter)(),_=(0,n.e)(),[S,C]=(0,r.useState)(""),[P,F]=(0,r.useState)(""),[A,Z]=(0,r.useState)("10"),[I,T]=(0,r.useState)("2"),[D,M]=(0,r.useState)("moderate"),[O,z]=(0,r.useState)("20"),[E,R]=(0,r.useState)(!0),[q,L]=(0,r.useState)(!0),U=async()=>{u(!0),N(null),p(!1);try{let{data:{user:e}}=await _.auth.getUser();if(!e)throw Error("Not authenticated");let{error:t}=await _.from("user_settings").upsert({user_id:e.id,portfolio_size:S||null,portfolio_size_exact:P?parseInt(P):null,daily_cap_pct:parseFloat(A),per_trade_limit_pct:parseFloat(I),risk_tolerance:D,options_cap_pct:parseFloat(O),alerts_enabled:E,email_new_reports:q,updated_at:new Date().toISOString()});if(t)throw t;p(!0),setTimeout(()=>p(!1),3e3)}catch(e){N(e instanceof Error?e.message:"Failed to save settings")}finally{u(!1)}},B=async()=>{await _.auth.signOut(),k.push("/login")},G=async()=>{try{let e=await fetch("/api/user/billing-portal",{method:"POST"}),t=await e.json();t.url&&(window.location.href=t.url)}catch(e){N("Failed to open billing portal")}};return e?(0,a.jsxs)(a.Fragment,{children:[a.jsx(l.Header,{title:"Settings",showNotifications:!1}),a.jsx("main",{className:"px-4 py-6 max-w-lg mx-auto",children:a.jsx("p",{className:"text-center text-muted-foreground",children:"Loading..."})})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(l.Header,{title:"Settings",showNotifications:!1}),(0,a.jsxs)("main",{className:"px-4 py-6 max-w-lg mx-auto space-y-6",children:[x&&(0,a.jsxs)(f.bZ,{variant:"success",children:[a.jsx(j.Z,{className:"h-4 w-4"}),a.jsx(f.X,{children:"Settings saved successfully!"})]}),w&&a.jsx(f.bZ,{variant:"destructive",children:a.jsx(f.X,{children:w})}),(0,a.jsxs)(g.Zb,{children:[(0,a.jsxs)(g.Ol,{children:[a.jsx(g.ll,{children:"Trading Profile"}),a.jsx(g.SZ,{children:"Customize your trading parameters for personalized guidance"})]}),(0,a.jsxs)(g.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(c._,{htmlFor:"portfolioExact",children:"Portfolio Size"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:"$"}),a.jsx(d.I,{id:"portfolioExact",type:"number",placeholder:"50000",value:P,onChange:e=>F(e.target.value),className:"pl-7"})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Total capital you're trading with"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(c._,{htmlFor:"dailyCap",children:"Daily Cap (%)"}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx(d.I,{id:"dailyCap",type:"number",min:"1",max:"100",value:A,onChange:e=>Z(e.target.value),className:"w-24"}),a.jsx("span",{className:"text-sm text-muted-foreground",children:"%"})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Max % of portfolio to deploy in a single day"}),P&&A&&(0,a.jsxs)("p",{className:"text-sm font-medium text-primary",children:["= $",(parseFloat(P)*parseFloat(A)/100).toLocaleString()," daily budget"]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(c._,{htmlFor:"perTradeLimit",children:"Per-Trade Limit (%)"}),a.jsx(d.I,{id:"perTradeLimit",type:"number",min:"1",max:"10",value:I,onChange:e=>T(e.target.value)}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Maximum percentage of portfolio per trade"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(c._,{htmlFor:"riskTolerance",children:"Risk Tolerance"}),(0,a.jsxs)(m,{id:"riskTolerance",value:D,onChange:e=>M(e.target.value),children:[a.jsx("option",{value:"conservative",children:"Conservative"}),a.jsx("option",{value:"moderate",children:"Moderate"}),a.jsx("option",{value:"aggressive",children:"Aggressive"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(c._,{htmlFor:"optionsCap",children:"Options Cap (%)"}),a.jsx(d.I,{id:"optionsCap",type:"number",min:"0",max:"100",value:O,onChange:e=>z(e.target.value)}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Maximum percentage of portfolio in options"})]}),(0,a.jsxs)("div",{className:"flex items-start gap-2 text-xs text-muted-foreground pt-2 border-t",children:[a.jsx(v.Z,{className:"h-3 w-3 mt-0.5 flex-shrink-0"}),a.jsx("span",{children:"Your portfolio information is private and never shared with anyone."})]})]})]}),(0,a.jsxs)(g.Zb,{children:[(0,a.jsxs)(g.Ol,{children:[a.jsx(g.ll,{children:"Notifications"}),a.jsx(g.SZ,{children:"Manage your email preferences"})]}),(0,a.jsxs)(g.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium",children:"Price Alerts"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Get notified when price hits key levels"})]}),a.jsx(h,{checked:E,onCheckedChange:R})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium",children:"New Report Emails"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Daily notification when report is published"})]}),a.jsx(h,{checked:q,onCheckedChange:L})]})]})]}),a.jsx(o.Button,{onClick:U,className:"w-full",loading:s,children:"Save Settings"}),(0,a.jsxs)(g.Zb,{children:[a.jsx(g.Ol,{children:a.jsx(g.ll,{children:"Subscription"})}),a.jsx(g.aY,{children:(0,a.jsxs)(o.Button,{variant:"outline",className:"w-full",onClick:G,children:[a.jsx(b,{className:"h-4 w-4 mr-2"}),"Manage Billing"]})})]}),(0,a.jsxs)(o.Button,{variant:"ghost",className:"w-full text-muted-foreground",onClick:B,children:[a.jsx(y,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]})]})}},2485:(e,t,s)=>{"use strict";s.d(t,{Header:()=>c});var a=s(326),r=s(7577),i=s(6507),n=s(772),l=s(2945),o=s(434);function d(){let[e,t]=(0,r.useState)(0);return(0,l.e)(),a.jsx(o.default,{href:"/alerts",children:(0,a.jsxs)(n.Button,{variant:"ghost",size:"icon",className:"relative",children:[a.jsx(i.Z,{className:"h-5 w-5"}),e>0&&a.jsx("span",{className:"absolute -top-1 -right-1 h-5 w-5 rounded-full bg-red-500 text-[10px] font-bold text-white flex items-center justify-center animate-pulse",children:e>99?"99+":e})]})})}function c({title:e="Flacko AI",showNotifications:t=!0}){return a.jsx("header",{className:"sticky top-0 z-40 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-14 px-4 max-w-lg mx-auto",children:[a.jsx("h1",{className:"text-lg font-semibold",children:e}),t&&a.jsx(d,{})]})})}},2318:(e,t,s)=>{"use strict";s.d(t,{Cd:()=>d,X:()=>c,bZ:()=>o});var a=s(326),r=s(7577),i=s(9360),n=s(7863);let l=(0,i.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive",success:"border-green-500/50 text-green-500 dark:border-green-500 [&>svg]:text-green-500",warning:"border-yellow-500/50 text-yellow-500 dark:border-yellow-500 [&>svg]:text-yellow-500"}},defaultVariants:{variant:"default"}}),o=r.forwardRef(({className:e,variant:t,...s},r)=>a.jsx("div",{ref:r,role:"alert",className:(0,n.cn)(l({variant:t}),e),...s}));o.displayName="Alert";let d=r.forwardRef(({className:e,...t},s)=>a.jsx("h5",{ref:s,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",e),...t}));d.displayName="AlertTitle";let c=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",e),...t}));c.displayName="AlertDescription"},6660:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`/Users/justinhoffmann/Desktop/Flacko_AI/flacko-ai/app/(dashboard)/settings/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[9276,8790,4755,5333,7654],()=>s(9239));module.exports=a})();
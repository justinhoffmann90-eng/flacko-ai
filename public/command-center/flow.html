<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Information Flow ‚Äî Flacko AI</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #0f0f1a 0%, #1a1a2e 100%);
      min-height: 100vh;
      color: #fff;
      padding: 40px 20px;
    }

    .container { max-width: 1200px; margin: 0 auto; }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 40px;
      padding-bottom: 20px;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }

    .logo { display: flex; align-items: center; gap: 12px; }
    .logo span { font-size: 2rem; }
    .logo h1 { 
      font-size: 1.4rem; 
      font-weight: 600;
      background: none;
      -webkit-text-fill-color: #fff;
    }

    nav { display: flex; gap: 15px; flex-wrap: wrap; }
    nav a {
      color: rgba(255,255,255,0.6);
      text-decoration: none;
      font-size: 0.9rem;
      padding: 8px 16px;
      border-radius: 8px;
      transition: all 0.2s;
    }
    nav a:hover { color: #fff; background: rgba(255,255,255,0.1); }
    nav a.active { color: #fff; background: rgba(96,165,250,0.2); }

    .page-title {
      text-align: center;
      margin-bottom: 50px;
    }

    .page-title h2 {
      font-size: 2.5rem;
      margin-bottom: 10px;
      background: linear-gradient(135deg, #60a5fa, #a78bfa);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .subtitle {
      color: rgba(255,255,255,0.5);
      font-size: 1rem;
    }

    .flow-stage {
      background: rgba(255,255,255,0.03);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 16px;
      padding: 30px;
      margin-bottom: 30px;
      position: relative;
    }

    .flow-stage::after {
      content: '‚Üì';
      position: absolute;
      bottom: -35px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 2rem;
      color: rgba(96,165,250,0.3);
    }

    .flow-stage:last-child::after {
      display: none;
    }

    .stage-header {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 1px solid rgba(255,255,255,0.08);
    }

    .stage-icon {
      font-size: 2rem;
      width: 60px;
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(96,165,250,0.1);
      border-radius: 12px;
    }

    .stage-info {
      flex: 1;
    }

    .stage-title {
      font-size: 1.4rem;
      font-weight: 600;
      margin-bottom: 5px;
    }

    .stage-desc {
      font-size: 0.9rem;
      color: rgba(255,255,255,0.5);
    }

    .stage-content {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 15px;
    }

    .source-card, .process-card, .output-card {
      background: rgba(255,255,255,0.02);
      border: 1px solid rgba(255,255,255,0.06);
      border-radius: 12px;
      padding: 20px;
    }

    .card-title {
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .card-url {
      font-size: 0.8rem;
      color: #60a5fa;
      font-family: monospace;
      word-break: break-all;
      margin-bottom: 10px;
    }

    .card-list {
      list-style: none;
      font-size: 0.85rem;
      line-height: 1.8;
      color: rgba(255,255,255,0.7);
    }

    .card-list li {
      padding-left: 20px;
      position: relative;
    }

    .card-list li::before {
      content: '‚Üí';
      position: absolute;
      left: 0;
      color: rgba(96,165,250,0.5);
    }

    .instruction-block {
      background: rgba(251,191,36,0.05);
      border-left: 3px solid #fbbf24;
      padding: 15px;
      margin-top: 10px;
      border-radius: 4px;
    }

    .instruction-block .label {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      color: #fbbf24;
      margin-bottom: 8px;
      font-weight: 600;
    }

    .instruction-block ol {
      font-size: 0.85rem;
      color: rgba(255,255,255,0.7);
      line-height: 1.6;
      padding-left: 20px;
    }

    .code-path {
      font-family: monospace;
      font-size: 0.8rem;
      background: rgba(0,0,0,0.3);
      padding: 8px 12px;
      border-radius: 6px;
      margin-top: 10px;
      color: #a78bfa;
    }

    .verification-section {
      background: rgba(74,222,128,0.05);
      border: 2px solid rgba(74,222,128,0.2);
      border-radius: 16px;
      padding: 30px;
      margin-top: 40px;
    }

    .verification-section h2 {
      font-size: 1.5rem;
      margin-bottom: 20px;
      color: #4ade80;
    }

    .check-item {
      background: rgba(255,255,255,0.02);
      border: 1px solid rgba(255,255,255,0.06);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 15px;
    }

    .check-title {
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 10px;
    }

    .check-what {
      font-size: 0.85rem;
      color: rgba(255,255,255,0.7);
      margin-bottom: 10px;
    }

    .check-fix {
      font-size: 0.85rem;
      color: #fbbf24;
      font-weight: 500;
    }

    .nav-links {
      text-align: center;
      margin-top: 40px;
      padding-top: 30px;
      border-top: 1px solid rgba(255,255,255,0.1);
    }

    .nav-links a {
      color: #60a5fa;
      text-decoration: none;
      margin: 0 15px;
      font-size: 0.9rem;
    }

    .nav-links a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">
        <span>‚öîÔ∏è</span>
        <h1>Command Center</h1>
      </div>
      <nav>
        <a href="index.html">Dashboard</a>
        <a href="workflow.html">Workflow</a>
        <a href="flow.html" class="active">Flow</a>
        <a href="roles.html">Roles</a>
        <a href="report.html">Report</a>
      </nav>
    </header>
    
    <div class="page-title">
      <h2>üåä Information Flow</h2>
      <p class="subtitle">Complete data pipeline from sources to outputs</p>
    </div>

    <!-- Stage 1: Sources -->
    <div class="flow-stage">
      <div class="stage-header">
        <div class="stage-icon">üì•</div>
        <div class="stage-info">
          <div class="stage-title">External Sources</div>
          <div class="stage-desc">Where data originates</div>
        </div>
      </div>
      <div class="stage-content">
        <div class="source-card">
          <div class="card-title">üìä SpotGamma</div>
          <div class="card-url">dashboard.spotgamma.com</div>
          <ul class="card-list">
            <li>HIRO dealer positioning (S&P, QQQ, TSLA)</li>
            <li>Call/Put wall levels</li>
            <li>Equity Hub gamma exposure</li>
            <li>FlowPatrol PDF (daily options flow)</li>
          </ul>
          <div class="instruction-block">
            <div class="label">‚ö†Ô∏è Critical</div>
            <ol>
              <li>Keep left sidebar visible</li>
              <li>Toggle "HIRO Upgraded" OFF</li>
              <li>Download actual PDF (not webpage print)</li>
            </ol>
          </div>
        </div>

        <div class="source-card">
          <div class="card-title">üìà TradingView</div>
          <div class="card-url">tradingview.com/chart/...</div>
          <ul class="card-list">
            <li>TSLA: Weekly, Daily, 4H, 1H</li>
            <li>QQQ: Weekly, Daily</li>
            <li>BX-Trender + EMA + SMI indicators</li>
          </ul>
          <div class="instruction-block">
            <div class="label">‚ö†Ô∏è Critical</div>
            <ol>
              <li>Use saved layout URLs</li>
              <li>ALWAYS verify watchlist (right panel) visible</li>
              <li>If collapsed, click "Watchlist, details and news"</li>
            </ol>
          </div>
        </div>

        <div class="source-card">
          <div class="card-title">üì∞ FS Insight</div>
          <div class="card-url">fsinsight.com/members/</div>
          <ul class="card-list">
            <li>First Word (Tom Lee) ‚Äî macro</li>
            <li>First to Market (Hardika Singh) ‚Äî intel</li>
            <li>Daily Technical Strategy (Mark Newton)</li>
            <li>FlashInsights ‚Äî real-time commentary</li>
          </ul>
          <div class="code-path">Logged in via clawd browser</div>
        </div>

        <div class="source-card">
          <div class="card-title">üíπ Yahoo Finance</div>
          <div class="card-url">finance.yahoo.com/quote/TSLA/</div>
          <ul class="card-list">
            <li>Current TSLA price</li>
            <li>Pre-market / after-hours</li>
            <li>Daily % change</li>
          </ul>
          <div class="code-path">web_fetch tool (HTML scraping)</div>
        </div>

        <div class="source-card">
          <div class="card-title">üìÑ Daily Report Upload</div>
          <div class="card-url">flacko.ai/admin</div>
          <ul class="card-list">
            <li>Justin uploads .md file</li>
            <li>Contains: Mode, Tiers, Alert Levels</li>
            <li>Trigger: New report analysis</li>
          </ul>
          <div class="code-path">~/trading_inputs/daily-reports/</div>
        </div>
      </div>
    </div>

    <!-- Stage 2: Ingestion -->
    <div class="flow-stage">
      <div class="stage-header">
        <div class="stage-icon">üîÑ</div>
        <div class="stage-info">
          <div class="stage-title">Data Ingestion</div>
          <div class="stage-desc">How data enters the system</div>
        </div>
      </div>
      <div class="stage-content">
        <div class="process-card">
          <div class="card-title">Manual Upload</div>
          <ul class="card-list">
            <li>Justin sends .md file via Telegram</li>
            <li>Clawd detects in ~/.clawdbot/media/inbound/</li>
            <li>Auto-saves to daily-reports directory</li>
          </ul>
        </div>

        <div class="process-card">
          <div class="card-title">Automated Screenshots</div>
          <ul class="card-list">
            <li>Cron job triggers at 7:00a CT</li>
            <li>Browser automation via browser tool</li>
            <li>Saves to ~/Desktop/Clawd Screenshots/</li>
          </ul>
        </div>

        <div class="process-card">
          <div class="card-title">Web Scraping</div>
          <ul class="card-list">
            <li>FS Insight: Browser navigation + manual read</li>
            <li>Yahoo Finance: web_fetch HTML parse</li>
            <li>Real-time as needed</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Stage 3: Storage -->
    <div class="flow-stage">
      <div class="stage-header">
        <div class="stage-icon">üíæ</div>
        <div class="stage-info">
          <div class="stage-title">Local Storage</div>
          <div class="stage-desc">Where data is persisted</div>
        </div>
      </div>
      <div class="stage-content">
        <div class="process-card">
          <div class="card-title">Daily Reports</div>
          <div class="code-path">~/trading_inputs/daily-reports/<br>TSLA_Daily_Report_YYYY-MM-DD.md</div>
          <ul class="card-list">
            <li>Complete analysis markdown</li>
            <li>Mode, Tiers, Alert Levels table</li>
            <li>Source of truth for all levels</li>
          </ul>
        </div>

        <div class="process-card">
          <div class="card-title">Key Levels Config</div>
          <div class="code-path">~/trading_inputs/key_levels.json</div>
          <ul class="card-list">
            <li>Extracted from report Alert Levels table</li>
            <li>Used by price monitoring system</li>
            <li>Includes: price, level, emoji, action</li>
          </ul>
        </div>

        <div class="process-card">
          <div class="card-title">Screenshots</div>
          <div class="code-path">~/Desktop/Clawd Screenshots/<br>YYYY-MM-DD/*.png</div>
          <ul class="card-list">
            <li>TradingView charts (6 files)</li>
            <li>SpotGamma pages (3-4 files)</li>
            <li>FlowPatrol PDF (1 file)</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Stage 4: Processing -->
    <div class="flow-stage">
      <div class="stage-header">
        <div class="stage-icon">‚öôÔ∏è</div>
        <div class="stage-info">
          <div class="stage-title">Processing</div>
          <div class="stage-desc">Data transformation & analysis</div>
        </div>
      </div>
      <div class="stage-content">
        <div class="process-card">
          <div class="card-title">Key Levels Extraction</div>
          <ol style="font-size: 0.85rem; line-height: 1.8; color: rgba(255,255,255,0.7); padding-left: 20px;">
            <li>Read latest .md report</li>
            <li>Find "Alert Levels" table</li>
            <li>Parse: price, level, emoji, action</li>
            <li>Update key_levels.json</li>
            <li>Run update-key-levels.sh</li>
          </ol>
        </div>

        <div class="process-card">
          <div class="card-title">Morning Brief (8a CT)</div>
          <ol style="font-size: 0.85rem; line-height: 1.8; color: rgba(255,255,255,0.7); padding-left: 20px;">
            <li>Read latest report (Mode/Tiers/Posture)</li>
            <li>Fetch current price (Yahoo)</li>
            <li>Read FS Insight First Word</li>
            <li>Read FS Insight First to Market</li>
            <li>Combine into brief format</li>
            <li>Send to Telegram (approval)</li>
          </ol>
        </div>

        <div class="process-card">
          <div class="card-title">EOD Wrap (4:30p CT)</div>
          <ol style="font-size: 0.85rem; line-height: 1.8; color: rgba(255,255,255,0.7); padding-left: 20px;">
            <li>Read Daily Technical Strategy</li>
            <li>Read FlashInsights (today only)</li>
            <li>Check US Policy if relevant</li>
            <li>Combine into wrap format</li>
            <li>Send to Telegram (approval)</li>
          </ol>
        </div>

        <div class="process-card">
          <div class="card-title">Price Monitor (Every 5 min)</div>
          <ol style="font-size: 0.85rem; line-height: 1.8; color: rgba(255,255,255,0.7); padding-left: 20px;">
            <li>Cron-job.org hits API endpoint</li>
            <li>API reads key_levels.json</li>
            <li>Fetch current TSLA price</li>
            <li>Compare vs alert thresholds</li>
            <li>If triggered: POST to Discord #alerts</li>
            <li>Update Supabase system_config</li>
          </ol>
        </div>
      </div>
    </div>

    <!-- Stage 5: Outputs -->
    <div class="flow-stage">
      <div class="stage-header">
        <div class="stage-icon">üì§</div>
        <div class="stage-info">
          <div class="stage-title">Outputs</div>
          <div class="stage-desc">Where processed data goes</div>
        </div>
      </div>
      <div class="stage-content">
        <div class="output-card">
          <div class="card-title">üí¨ Telegram</div>
          <ul class="card-list">
            <li>All drafts for Justin's approval</li>
            <li>Morning brief (8a)</li>
            <li>EOD wrap (4:30p)</li>
            <li>Market pulse (intraday)</li>
          </ul>
          <div class="code-path">Private channel with Justin</div>
        </div>

        <div class="output-card">
          <div class="card-title">üì¢ Discord #reports</div>
          <ul class="card-list">
            <li>New daily report announcements</li>
            <li>Mode, Tiers, Positioning</li>
            <li>NOT for price alerts</li>
          </ul>
          <div class="code-path">Channel ID: 1465448933525295298</div>
        </div>

        <div class="output-card">
          <div class="card-title">üö® Discord #alerts</div>
          <ul class="card-list">
            <li>Price level triggers</li>
            <li>Master eject warnings</li>
            <li>Critical mode changes</li>
          </ul>
          <div class="code-path">Webhook: 1463702802349035551</div>
        </div>

        <div class="output-card">
          <div class="card-title">üìä Dashboard</div>
          <ul class="card-list">
            <li>Data verification panel</li>
            <li>Task status & activity log</li>
            <li>Role cards & scheduled jobs</li>
          </ul>
          <div class="code-path">~/clawd/dashboard/index.html</div>
        </div>
      </div>
    </div>

    <!-- Verification Section -->
    <div class="verification-section">
      <h2>üîç Verification Points</h2>
      
      <div class="check-item">
        <div class="check-title">‚úÖ Report ‚Üî key_levels.json Sync</div>
        <div class="check-what">Check: verification.json sync status (report.date vs keyLevels.data.reportDate)</div>
        <div class="check-fix">Fix: Re-extract Alert Levels table, update key_levels.json, run update-key-levels.sh</div>
      </div>

      <div class="check-item">
        <div class="check-title">‚úÖ Price Monitor Health</div>
        <div class="check-what">Check: Supabase system_config.alert_system_status.last_run (must be <15 min during market hours)</div>
        <div class="check-fix">Fix: ALERT JUSTIN IMMEDIATELY if stale ‚Äî do NOT wait or assume it's fine</div>
      </div>

      <div class="check-item">
        <div class="check-title">‚úÖ Screenshot Completeness</div>
        <div class="check-what">Check: File count in today's screenshot folder (expect 10-11 files)</div>
        <div class="check-fix">Fix: Re-run trading capture, report which files missing with error details</div>
      </div>

      <div class="check-item">
        <div class="check-title">‚úÖ Brief vs Report Consistency</div>
        <div class="check-what">Check: Morning brief key levels match report Alert Levels table exactly</div>
        <div class="check-fix">Fix: Re-read report, re-extract levels, regenerate brief (DO NOT guess or use memory)</div>
      </div>
    </div>

    <div class="nav-links">
      <a href="index.html">‚Üê Dashboard</a>
      <a href="INFORMATION_FLOW.md" target="_blank">Full Documentation ‚Üí</a>
    </div>
  </div>
</body>
</html>
